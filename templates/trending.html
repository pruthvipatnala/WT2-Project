<!DOCTYPE html>
<html lang="en">
<head>
  <title>Insights</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  <style>
    /* Set height of the grid so .sidenav can be 100% (adjust as needed) */
    .row.content {height: 550px}
    
    /* Set gray background color and 100% height */
    .sidenav {
      background-color: #f1f1f1;
      height: 100%;
    }
        
    /* On small screens, set height to 'auto' for the grid */
    @media screen and (max-width: 767px) {
      .row.content {height: auto;} 
    }
  </style>
</head>
<script type="text/javascript">
  
  function getTrendingPlaces(){
    var xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {

      var data = JSON.parse(this.responseText);
      //document.getElementById("demo").innerHTML = this.responseText;
      var data = data['data']

      var categories = {"family": ['alwar', 'kulumanali', 'nainital', 'shilong'], "hills": ['almora', 'coorg', 'darjeeling', 'dharamsala'], "leisure" : ['allepey', 'chandigarh', 'chikmagalur', 'kochi']}


      for (i in data){
        x = ""
        //alert(i);
        div_id = document.getElementById(i+'_spots')
        for (j in data[i]){
          //alert(data[i][j]);
          var keys = Object.keys(data[i][j]);
          //console.log(data[i][j][keys[0]]);
          place = keys[0][0].toUpperCase() +  
            keys[0].slice(1)
          pos_percent = data[i][j][keys[0]]
          x += "<p align='center'>"+place +" - " + pos_percent + "% </p>"
          console.log(x)
          //alert(data[i][j][categories[i][j]]);
        }
        div_id.innerHTML += x
        
      }

  }
};
xhttp.open("GET", "http://localhost:8000/get_trends", true);
xhttp.send();


  }


</script>

<body onload="getTrendingPlaces()">



<div class="container-fluid">
  <div class="row content">
    <div class="col-sm-3 sidenav hidden-xs">
      <h2>Tripster Insights</h2>
      <ul class="nav nav-pills nav-stacked">
        <li class="active"><a href="home.html">Home</a></li>
        <li><a href="places.html">Places</a></li>
      </ul><br>
    </div>
    <br>
    
    <div class="col-sm-9">
      <div class="well">
        <h2 align="center">Intelligent Component</h2>
        <p align="center">Finding the top trending spots to visit by analysing the sentiments of the user experiences.</p>
      </div>
      <div class="row">
        <div class="col-sm-3">
          <div class="well">
            <h4 align="center">Trip Categories</h4>
            <p align="center">3</p> 
          </div>
        </div>
        <div class="col-sm-3">
          <div class="well">
            <h4 align="center">Places</h4>
            <p align="center">12</p> 
          </div>
        </div>
        <div class="col-sm-3">
          <div class="well">
            <h4 align="center">User Experiences</h4>
            <p align="center"> 100+ </p> 
          </div>
        </div>
        <div class="col-sm-3">
          <div class="well">
            <h4 align="center">Bounce</h4>
            <p align="center">30%</p> 
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <div id="family_spots" class="well">
            <h4 align="center">Top Family spots</h4>
          </div>
        </div>
        <div class="col-sm-4">
          <div id="hills_spots" class="well">
            <h4 align="center">Top Hill Stations</h4>
          </div>
        </div>
        <div class="col-sm-4">
          <div id="leisure_spots" class="well">
            <h4 align="center">Top Leisure spots</h4>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-8">
          <div class="well">
            <p>Visit places according to user experiences</p> 
          </div>
        </div>
        <div class="col-sm-4">
          <div class="well">
            <p>@Web Tech Project - 2019</p> 
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>

